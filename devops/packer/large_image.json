{
    "variables": {
        "tile_sources": ""
    },
    "builders": [
        {
            "type": "docker",
            "name": "girder",
            "image": "ubuntu:16.04",
            "pull": false,
            "commit": true
        }
    ],
    "provisioners": [
        {
            "type": "shell-local",
            "command": "ansible-galaxy install -p ../ansible/roles  -r ../ansible/requirements.yml"
        },
        {
            "type": "ansible",
            "playbook_file": "../ansible/girder.yml",
            "groups": "{{user `tile_sources`}}",
            "extra_arguments": [
                "-vv"
            ]
        }
    ],
    "post-processors": [
        {
            "type": "docker-tag",
            "repository": "large_image/large_image",
            "tag": "latest",
            "only": ["girder"]
        }
    ]
}
